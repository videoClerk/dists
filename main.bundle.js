!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("VClerkWidget",[],e):"object"==typeof exports?exports.VClerkWidget=e():t.VClerkWidget=e()}(self,(function(){return(()=>{var t,e,n,i,s={3483:(t,e,n)=>{var i={"./en.json":[8494,494],"./no.json":[123,123],"./pt-br.json":[3490,490]};function s(t){if(!n.o(i,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=i[t],s=e[0];return n.e(e[1]).then((()=>n.t(s,3)))}s.keys=()=>Object.keys(i),s.id=3483,t.exports=s},9362:(t,e,n)=>{"use strict";n.d(e,{N:()=>r,Z:()=>c});const i={en:"en",no:"no",nb:"no",nn:"no","pt-br":"pt-br",pt:"pt-br"},s={en:"eng",no:"nno",nb:"nno",nn:"nno","pt-br":"por",pt:"por"};let o;const r=t=>s[t]?s[t]:s.en;class a{static getBrowserLanguages(){const t=window.navigator,e=["language","browserLanguage","systemLanguage","userLanguage"],n=[];let i,s;if(Array.isArray(t.languages))for(s=0;s<t.languages.length;s+=1)i=t.languages[s],i&&i.length&&n.push(i);for(s=0;s<e.length;s+=1)i=t[e[s]],i&&i.length&&n.push(i);return n}static getLanguage(t,e){const n=Object.keys(i);let s;return t?t.length>2&&n.includes(t.toLowerCase())?s=t.toLowerCase():n.includes(t.substring(0,2).toLowerCase())&&(s=t.substring(0,2).toLowerCase()):a.getBrowserLanguages().some((t=>t.length>2&&n.includes(t.toLowerCase())?(s=t.toLowerCase(),!0):!!n.includes(t.substring(0,2).toLowerCase())&&(s=t.substring(0,2).toLowerCase(),!0))),s||e&&(e.length>2&&n.includes(e.toLowerCase())?s=e.toLowerCase():n.includes(e.substring(0,2).toLowerCase())&&(s=e.substring(0,2).toLowerCase())),s||(s="en"),s}static init(t,e){const s=a.getLanguage(t,e);return n(3483)(`./${i[s]}.json`).then((t=>(o=t,o)))}static t(t){if(!o)throw new Error("i18n has not been initialized");return t.split(".").reduce(((t,e)=>(null==t?void 0:t[e])||null),o)}}const c=a},1976:t=>{t.exports=/((CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS)[ +]+(13[_.]0|13[_.]([1-9]|\d{2,})|13[_.]7|13[_.]([8-9]|\d{2,})|(1[4-9]|[2-9]\d|\d{3,})[_.]\d+|14[_.]0|14[_.]([1-9]|\d{2,})|14[_.]5|14[_.]([6-9]|\d{2,})|(1[5-9]|[2-9]\d|\d{3,})[_.]\d+)(?:[_.]\d+)?)|(Opera\/.+Opera Mobi.+Version\/(62\.0|62\.([1-9]|\d{2,})|(6[3-9]|[7-9]\d|\d{3,})\.\d+))|(Opera\/(62\.0|62\.([1-9]|\d{2,})|(6[3-9]|[7-9]\d|\d{3,})\.\d+).+Opera Mobi)|(Opera Mobi.+Opera(?:\/|\s+)(62\.0|62\.([1-9]|\d{2,})|(6[3-9]|[7-9]\d|\d{3,})\.\d+))|(SamsungBrowser\/(12\.0|12\.([1-9]|\d{2,})|(1[3-9]|[2-9]\d|\d{3,})\.\d+))|(Edge\/(79(?:\.0)?|79(?:\.([1-9]|\d{2,}))?|([8-9]\d|\d{3,})(?:\.\d+)?|83(?:\.0)?|83(?:\.([1-9]|\d{2,}))?|(8[4-9]|9\d|\d{3,})(?:\.\d+)?))|((Chromium|Chrome)\/(72\.0|72\.([1-9]|\d{2,})|(7[3-9]|[8-9]\d|\d{3,})\.\d+|83\.0|83\.([1-9]|\d{2,})|(8[4-9]|9\d|\d{3,})\.\d+)(?:\.\d+)?)|(Version\/(13\.0|13\.([1-9]|\d{2,})|(1[4-9]|[2-9]\d|\d{3,})\.\d+|14\.0|14\.([1-9]|\d{2,})|(1[5-9]|[2-9]\d|\d{3,})\.\d+)(?:\.\d+)? Safari\/)|(Firefox\/(66\.0|66\.([1-9]|\d{2,})|(6[7-9]|[7-9]\d|\d{3,})\.\d+)\.\d+)|(Firefox\/(66\.0|66\.([1-9]|\d{2,})|(6[7-9]|[7-9]\d|\d{3,})\.\d+)(pre|[ab]\d+[a-z]*)?)/},2871:(t,e,n)=>{var i={"./seller1.svg":[534,534],"./seller2.svg":[1833,645]};function s(t){if(!n.o(i,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=i[t],s=e[0];return n.e(e[1]).then((()=>n(s)))}s.keys=()=>Object.keys(i),s.id=2871,t.exports=s},9903:(t,e,n)=>{var i={"./shopify":[4310,310],"./shopify.js":[4310,310]};function s(t){if(!n.o(i,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=i[t],s=e[0];return n.e(e[1]).then((()=>n(s)))}s.keys=()=>Object.keys(i),s.id=9903,t.exports=s}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={id:t,loaded:!1,exports:{}};return s[t].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=s,r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var s=Object.create(null);r.r(s);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&i&&n;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>n[t]));return o.default=()=>n,r.d(s,o),s},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,n)=>(r.f[n](t,e),e)),[])),r.u=t=>(({429:"skylink",713:"vclerk-widget"}[t]||t)+".chunk."+{31:"7218e64e59e1ed88e5e8",123:"d6d0e79904592c10f36a",310:"2495607175426e4b5a6f",429:"a85637f4d635752a02c9",490:"7da1dbba94fe990e161e",494:"7e3e1e810f2237bb4583",534:"095a55eaf95466bbd7e1",645:"0165dfb10d7b5fa92aa7",713:"0bcda9ee1093e98a5ea9",816:"b7f7fb9aea4cc6269857"}[t]+".js"),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n={},i="VClerkWidget:",r.l=(t,e,s,o)=>{if(n[t])n[t].push(e);else{var a,c;if(void 0!==s)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var u=d[l];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==i+s){a=u;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",i+s),a.src=t),n[t]=[e];var h=(e,i)=>{a.onerror=a.onload=null,clearTimeout(p);var s=n[t];if(delete n[t],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((t=>t(i))),e)return e(i)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),c&&document.head.appendChild(a)}},r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={179:0};r.f.j=(e,n)=>{var i=r.o(t,e)?t[e]:void 0;if(0!==i)if(i)n.push(i[2]);else{var s=new Promise(((n,s)=>i=t[e]=[n,s]));n.push(i[2]=s);var o=r.p+r.u(e),a=new Error;r.l(o,(n=>{if(r.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var s=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+e,e)}};var e=(e,n)=>{var i,s,[o,a,c]=n,d=0;for(i in a)r.o(a,i)&&(r.m[i]=a[i]);for(c&&c(r),e&&e(n);d<o.length;d++)s=o[d],r.o(t,s)&&t[s]&&t[s][0](),t[o[d]]=0},n=self.webpackChunkVClerkWidget=self.webpackChunkVClerkWidget||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var a={};return(()=>{"use strict";r.r(a),r.d(a,{init:()=>h,on:()=>p,open:()=>v});var t=r(1976),e=r.n(t),n=r(9362);let i,s;const o={onAvailabilityChange:{trigger:("onAvailabilityChange",t=>{s.dispatchEvent(new CustomEvent("onAvailabilityChange",{detail:t}))}),onAttach:()=>i.getConfigPromise()}};let c;const d=new Promise((t=>{c=t}));class l{constructor(t,e={},n){i=this,this.domElement=t,this.config=e,this.theme=n,this.isAvailable=void 0,this.isOpen=!1,this._container=null,this._reactAttachElement=null,this._buttonBase=null,this._isButtonBaseInjected=!1,this._button=null,this._isButtonInjected=!1,this._buttonText=null,this._isButtonTextInjected=!1,this._buttonSpinner=null,this._isButtonSpinnerInjected=!1,this._buttonAvatar=null,this._isButtonAvatarInjected=!1,this._webpackChunkPromise=void 0,this._configPromise=void 0,this.intervalCheckIfAvailable(),c()}setContainer(){return r.e(31).then(r.bind(r,5031)),this._container=document.createElement("div"),this._container.setAttribute("class","vclerk-pw-container"),this._container.style.display="none",this._reactAttachElement=document.createElement("div"),this._reactAttachElement.setAttribute("class","vclerk-pw-container-wrapper"),this._container.appendChild(this._reactAttachElement),this.domElement.appendChild(this._container),this._container}get container(){return this._container||this.setContainer(),this._container}setButtonBase(){const t=document.createElement("div");return t.setAttribute("class","vclerk-pw-button-wrapper"),this._buttonBase=t,this._buttonBase}get buttonBase(){return this._buttonBase||this.setButtonBase(),this._buttonBase}injectButtonBase(){this.container.appendChild(this.buttonBase),this._isButtonBaseInjected=!0}setButtonText(){var t;const e=document.createElement("div"),i=!(null===(t=window.sessionStorage)||void 0===t||!t.getItem("vclerk-btn-msg-closed"));e.setAttribute("class","vclerk-pw-button-text"),i&&e.classList.add("vclerk-pw-text-hidden");const s=document.createElement("div");s.setAttribute("class","vclerk-pw-btn-close"),s.addEventListener("click",(()=>{window.sessionStorage&&window.sessionStorage.setItem("vclerk-btn-msg-closed",!0),this.buttonText.classList.add("vclerk-pw-text-hidden")})),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path fill="#fff" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>',e.appendChild(s);const o=document.createElement("div");o.setAttribute("class","vclerk-pw-button-logo"),o.innerHTML='\n      <svg\n        xmlns="http://www.w3.org/2000/svg"\n        width="36"\n        height="12"\n        viewBox="0 0 603.78 176.05"\n      >\n        <path\n          fill="#f4f4f4"\n          d="M345.75,200.09c-20.33,0-33.32-16-33.32-35.19,0-19.08,12.2-34.87,32.69-34.87,12.51,0,22.83,5.78,28.78,16.26l18.61-12.82c-9.7-16.27-25.34-25.5-46.29-25.5-36.13,0-57.09,27.69-57.09,58.65,0,29.25,18.77,55.83,54.11,55.83,25,0,43.64-13.13,52.71-35.65l-19.86-8.29C370.93,192.27,359.67,200.09,345.75,200.09ZM158.43,187.58l-27.84-77.1h-25L147.17,220h22.2l41.76-109.47h-25ZM666.49,177.1l37.85-37.54H674.15l-28.93,30.66V110.48H622.7V220h22.52V187l32.06,33h32.06ZM158,46.41v22a89.47,89.47,0,0,1,89.37,89.37h22A111.49,111.49,0,0,0,158,46.41Zm419.56,105.2V139.56h-21.9V220h22.52V178.19c0-12.19,7.66-18.92,18.14-18.92a31.37,31.37,0,0,1,10.32,1.88L609.88,140a38,38,0,0,0-11-1.56C589.55,138.47,580.79,142.38,577.51,151.61Zm-74.13-13.92c-25.18,0-41.6,18.3-41.6,42.22s16,41,41.13,41a44.74,44.74,0,0,0,33.78-14.55l-11.41-14.07a26.6,26.6,0,0,1-20,9.07c-11.57,0-18.77-6.72-20.18-14.39h54.11v-8.44C539.19,152.39,526.06,137.69,503.38,137.69Zm-18.77,33.15c1.72-9.07,8-14.7,17.21-14.7,9.85,0,15,6.41,15,14.7ZM442.7,200.72c-5.31,0-9.38-3.76-9.38-10.17V110.63H410.8V192.9c0,18.29,11.73,28,26.27,28a40,40,0,0,0,18.46-5l-5.32-17.36A15.87,15.87,0,0,1,442.7,200.72Z"\n          transform="translate(-105.57 -46.41)"\n        />\n      </svg>\n    ',e.appendChild(o);const r=document.createElement("div");r.setAttribute("class","vclerk-pw-text-container"),r.innerHTML=`\n    <div class="vclerk-pw-btn-heading">\n      <div class="vclerk-pw-button-online">&nbsp;</div>\n      <div>${n.Z.t("widget_main_button.button_descr_text")}</div> \n    </div>\n    <div class="vclerk-pw-btn-message">\n      ${this.config.message||n.Z.t("widget_main_button.default_message")}\n    </div>\n    `,e.appendChild(r),this._buttonText=e}get buttonText(){return this._buttonText||this.setButtonText(),this._buttonText}injectButtonText(){this.container.classList.remove("vclerk-pw-container-hide"),this.ejectButtonSpinner(),this.buttonBase.appendChild(this.buttonText),this._isButtonTextInjected=!0,this._isButtonBaseInjected||this.injectButtonBase()}ejectButtonText(){this._isButtonTextInjected&&(this.buttonBase.removeChild(this.buttonText),this._isButtonTextInjected=!1)}setButton(){const t=document.createElement("div");return t.setAttribute("class","vclerk-pw-button"),t.addEventListener("click",(()=>{this.isOpen||i.openWidget(this.config)})),this._button=t,this._button}get button(){return this._button||this.setButton(),this._button}injectButton(){this.buttonBase.appendChild(this.button),this._isButtonInjected=!0,this._isButtonInjected||this.injectButton()}ejectButton(){this._isButtonInjected&&(this.buttonBase.removeChild(this.button),this._isButtonInjected=!1)}static convertPictureSize(t,e){if(t){const n=t.indexOf("pictures/");return n?`${t.slice(0,n+8)}/tr:w-${e}/${t.slice(n+9)}`:""}return""}static preloadImage(t,e,n){const i=new Image;i.src=t,i.alt="clerk",i.onload=e,i.onerror=n}setButtonAvatar(){var t;const e=document.createElement("div");e.setAttribute("class","vclerk-pw-button-img-container");const n=()=>{var t,n;r(2871)(`./seller${t=1,n=2,t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1)+t)}.svg`).then((t=>{const n=new Image;n.src=t.default,n.alt="clerk",n.onload=t=>{var n;e.appendChild((null===(n=t.path)||void 0===n?void 0:n[0])||t.target),this._buttonAvatar=e}}))};return null!==(t=this.config.pictures)&&void 0!==t&&t[0]?this.constructor.preloadImage(this.constructor.convertPictureSize(this.config.pictures[0],120),(t=>{var n;e.appendChild((null===(n=t.path)||void 0===n?void 0:n[0])||t.target),this._buttonAvatar=e}),(()=>n())):n(),this._buttonAvatar=e,this._buttonAvatar}get buttonAvatar(){return this._buttonAvatar||this.setButtonAvatar(),this._buttonAvatar}injectButtonAvatar(){this._button.appendChild(this.buttonAvatar),this._isButtonAvatarInjected=!0,this._isButtonAvatarInjected||this.injectButtonAvatar()}ejectButtonAvatar(){this._isButtonAvatarInjected&&(this._button.removeChild(this.buttonAvatar),this._isButtonAvatarInjected=!1)}setButtonSpinner(){const t=document.createElement("div");return t.setAttribute("class","vclerk-spinner"),this._buttonSpinner=t,this._buttonSpinner}get buttonSpinner(){return this._buttonSpinner||this.setButtonSpinner(),this._buttonSpinner}injectButtonSpinner(){this.ejectButtonAvatar(),this.button.appendChild(this.buttonSpinner),this._isButtonSpinnerInjected=!0,this._button||this.injectButton()}ejectButtonSpinner(){this._isButtonSpinnerInjected&&(this.button.removeChild(this.buttonSpinner),this._isButtonSpinnerInjected=!1)}onClose(){this.isOpen=!1,this.container.classList.remove("vclerk-pw-container-open"),!0!==this.config.hideDefaultLauncher?(this.injectButtonAvatar(),this.injectButtonText(),this.getConfigPromise(!0).then((()=>{this.isAvailable||this.container.classList.add("vclerk-pw-container-hide")}))):this.container.classList.add("vclerk-pw-container-hide")}openWidget(t){this.getConfigPromise().then((()=>{this.container.classList.contains("vclerk-pw-container-hide")&&this.container.classList.remove("vclerk-pw-container-hide"),this.injectButtonSpinner(),this.chunkPromise.then((e=>(this.ejectButtonSpinner(),this.container.classList.add("vclerk-pw-container-open"),this.isOpen=!0,e.init(this._reactAttachElement,{...this.config,...t},this.theme,i.onClose.bind(this)))))}))}displayIfAvailable(){this.getConfigPromise(!0).then((()=>{!0===this.isAvailable?(this._isButtonInjected||this.injectButton(),this._isButtonAvatarInjected||this.injectButtonAvatar(),this._isButtonTextInjected||this.injectButtonText()):this._container&&this.container.classList.add("vclerk-pw-container-hide")}))}intervalCheckIfAvailable(){setInterval((()=>{this.isOpen||(!0!==this.config.hideDefaultLauncher&&!0!==this.config.hide?this.displayIfAvailable():this.getConfigPromise(!0))}),1e3*Math.ceil(this.config.intervalCheckAvailable||1)*60)}getConfigPromise(t){if(this._configPromise&&!t)return this._configPromise;const e=n.Z.getLanguage(this.config.language,this.config.languageFallback),i=("GET",o=`https://videoclerk-backend-dev.herokuapp.com/video/${this.config.queue}/available?language=${(0,n.N)(e)}`,r=this.config.apiKey,new Promise(((t,e)=>{const n=new XMLHttpRequest;n.open("GET",o),n.setRequestHeader("X-VideoClerk-API-Key",r),n.setRequestHeader("X-VideoClerk-Referer",window.location.href),n.onload=()=>{t(n.response)},n.onerror=()=>{e(n.response)},n.send()})));var o,r;const a=n.Z.init(this.config.language,this.config.languageFallback);return this._configPromise=Promise.all([i,a]).then((([t])=>{const e=JSON.parse(t);this.config={...this.config,...e.config,message:e.message,pictures:e.pictures},this.isAvailable!==e.show&&(this.isAvailable=e.show,s.events.onAvailabilityChange.trigger(this.isAvailable))})),this._configPromise}get chunkPromise(){return this._webpackChunkPromise||(this._webpackChunkPromise=new Promise(((t,e)=>{Promise.all([r.e(429),r.e(816),r.e(713)]).then(r.bind(r,4442)).then(t).catch((t=>{console.error(new Error("Failed to fetch vclerk main bundle."),t),e(t)}))}))),this._webpackChunkPromise}}const u=[...new URL(document.currentScript.src).searchParams].reduce(((t,[e,n])=>(t[e]="true"===n||"false"===n?"true"===n:n,t)),{});function h(t,n={},a){if(!e().test(navigator.userAgent))return void console.error("unsupported browser");if(navigator.userAgent.indexOf("OPiOS")>0||navigator.userAgent.indexOf("CriOS")>0||navigator.userAgent.indexOf("FxiOS")>0)return void console.error("unsupported browser");if(!navigator.mediaDevices)return void console.error("navigator.mediaDevices is empty, https issue?");if(s=document.createTextNode(null),s.events=o,t||(t=document.createElement("div"),document.body.appendChild(t)),t.classList.add("videoclerk-widget"),t.style.height="0px",t.style.width="0px",t.style.position="absolute",t.style.left="-9999px",t.style.all="initial",!(t instanceof HTMLElement))return new Error("Selected element is not an HTML element!");const c=t,{schema:d}={...u,...n};new Promise((t=>{d&&t(r(9903)(`./${d}`).then((t=>t.config))),t()})).then((t=>{const e={...t,...u,...n};new l(c,e,a),!0!==e.hide&&!0!==e.hideDefaultLauncher&&i.displayIfAvailable()}))}if(u.autoInit){let t="DOMContentLoaded";["load","DOMContentLoaded","instant"].includes(u.autoInit)&&(t=u.autoInit),"instant"===t?h():document.addEventListener(t,(()=>{h()}))}function p(t,e){d.then((()=>{o[t].onAttach&&o[t].onAttach(),s.addEventListener(t,(t=>e(t.detail)))}))}function v(t){i.openWidget({...i.config,...t})}})(),a})()}));