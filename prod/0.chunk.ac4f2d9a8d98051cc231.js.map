{"version":3,"sources":["webpack://VClerkWidget/./src/utils/schema/shopify.js"],"names":["config","initialProducts","productRegexp","window","location","toString","match","fetch","concat","then","response","json","shopifyProduct","productIds","product","variants","id","shopifyRecommended","products","forEach","push","onProductAdd","method","headers","body","JSON","stringify","items","quantity","external_id","ok","Error","hide","initialCart","data","map","item","variant_id","onGoToCart"],"mappings":"gHAAA,8CA4DA,IAAMA,EAAS,CACbC,gBA7DF,WACE,IAAMC,EAAgBC,OAAOC,SAC1BC,WACAC,MAAM,gCACT,OAAKJ,EAGEK,MAAM,aAAaC,OAAON,EAAc,GAAI,UAChDO,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACG,GACL,IAAMC,EAAa,CAACD,EAAeE,QAAQC,SAAS,GAAGC,IACvD,OAAOT,MACL,6CAA6CC,OAC3CI,EAAeE,QAAQE,GACvB,aAGDP,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACQ,GAIL,OAHAA,EAAmBC,SAASC,SAAQ,SAACL,GACnCD,EAAWO,KAAKN,EAAQC,SAAS,GAAGC,OAE/BH,QAjBN,IAyDTQ,aA7BF,SAAsBP,GACpB,OAAOP,MAAM,eAAgB,CAC3Be,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBC,MAAO,CACL,CACEC,SAAU,EACVZ,GAAIF,EAAQe,kBAIjBpB,MAAK,SAACC,GACP,IAAKA,EAASoB,GACZ,MAAM,IAAIC,MAAM,4BAcpBC,MATY7B,OAAOC,SAASC,WAAWC,MAAM,gCAU7C2B,YArCF,WACE,OAAO1B,MAAM,YACVE,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACyB,GAAD,OAAUA,EAAKP,MAAMQ,KAAI,SAACC,GAAD,OAAUA,EAAKC,kBAmChDC,WATF,WACEnC,OAAOC,SAAW","file":"0.chunk.ac4f2d9a8d98051cc231.js","sourcesContent":["function initialProducts() {\n  const productRegexp = window.location\n    .toString()\n    .match(/\\/products\\/([A-Za-z0-9_-]+)/);\n  if (!productRegexp) {\n    return [];\n  }\n  return fetch(\"/products/\".concat(productRegexp[1], \".json\"))\n    .then((response) => response.json())\n    .then((shopifyProduct) => {\n      const productIds = [shopifyProduct.product.variants[0].id];\n      return fetch(\n        \"/recommendations/products.json?product_id=\".concat(\n          shopifyProduct.product.id,\n          \"&limit=2\"\n        )\n      )\n        .then((response) => response.json())\n        .then((shopifyRecommended) => {\n          shopifyRecommended.products.forEach((product) => {\n            productIds.push(product.variants[0].id);\n          });\n          return productIds;\n        });\n    });\n}\n\nfunction initialCart() {\n  return fetch(\"/cart.js\")\n    .then((response) => response.json())\n    .then((data) => data.items.map((item) => item.variant_id));\n}\n\nfunction onProductAdd(product) {\n  return fetch(\"/cart/add.js\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      items: [\n        {\n          quantity: 1,\n          id: product.external_id,\n        },\n      ],\n    }),\n  }).then((response) => {\n    if (!response.ok) {\n      throw new Error(\"Something went wrong\");\n    }\n  });\n}\n\nconst hide = !window.location.toString().match(/\\/products\\/([A-Za-z0-9_-]+)/);\n\nfunction onGoToCart() {\n  window.location = \"/cart\";\n}\n\nconst config = {\n  initialProducts,\n  onProductAdd,\n  hide,\n  initialCart,\n  onGoToCart,\n};\n\n// eslint-disable-next-line import/prefer-default-export\nexport { config };\n"],"sourceRoot":""}